@import "normalize.scss";
$bgcolor: hsl(245, 92%, 10%);
$bgcolorlesscontrast: adjust-color($bgcolor, $saturation: -80%, $lightness: 30%);
$textcolor:hsl(319, 28%, 80%);
$linkcolor: hsl(355, 38%, 48%);
$mostfocuscolor: hsl(319, 28%, 51%);
$minorfocuscolor: hsl(61, 57%, 38%);

@mixin textshadows($widths, $colors) {

  $count: length($colors);
  $total: 0;
  $output: '';
  $currentwidth: 1;
  $gap : 1;

  @each $width in $widths {
    $total: $total + $width;
  }

  @for $j from 1 through $count {
    $width: nth($widths, $j);
    @for $i from  $currentwidth to ($currentwidth + $width) {
      $color: nth($colors, $j);
      $output: $output + '#{$color} #{$i + $gap}px #{$i + $gap}px 1px';
      @if( $i < $total) {
        $output: $output + ', ';
      }
    }

    $currentwidth: $currentwidth + $width;
  }

  text-shadow: unquote($output);

}

@mixin colorize($image, $color, $opacity) {
  background: $color;
  $color: transparentize($color, 1 - $opacity);
  background: -webkit-linear-gradient(left, $color, $color), url($image); 
  background: -moz-linear-gradient(left, $color, $color), url($image); 
  background: -ms-linear-gradient(left, $color, $color), url($image); 
  background: -o-linear-gradient(left, $color, $color), url($image); 
}

@mixin remfallback($property, $value) {
  #{$property}: $value * 16px;
  #{$property}: #{$value}rem;
}

.clearfix {
  *zoom: 1;
  &:before, &:after { content: ""; display: table; }
  &:after { clear: both; }
}

.droid {
  font-family: 'Droid Serif', serif;
  font-style: italic;
}

.alfa {
  font-family: 'Alfa Slab One', cursive;
  font-weight: normal;
  text-transform: uppercase;
  font-style: normal;
}

.banner-font-size {
  @include remfallback('font-size', 3);
}

.major-heading-font-size {
  @include remfallback('font-size', 2);
}

.minor-heading-font-size {
  @include remfallback('font-size', 1.5);
}
.normal-font-size {
  @include remfallback('font-size', 1);
}

.align-center {
  text-align: center;
}

.input-text {
  border: 1px dashed #000;
  border-color: $bgcolorlesscontrast; 
  box-shadow: inset 0 0 5px adjust-color($bgcolor, $lightness: -7%); 
  background: transparentize($bgcolor, 0.9); 
  color: $textcolor; 
  font-size: small;
  padding: 0.25em 0.5em;

  &:focus {
    background: transparentize(darken($bgcolor, 2%), 0.5);
    outline: none;
  }
}

.fancy-heading-star {
  @extend .alfa;
  color: $minorfocuscolor;
  letter-spacing: 3px;
  @include textshadows(1 1, #000 hsl(3, 46%, 16%));

  &::before,
  &::after {
    content: "✶";
    padding: 0 0.25em;
    color: $bgcolorlesscontrast;
    @include remfallback('font-size', 1);
    @include textshadows(1 1, #000 hsl(3, 46%, 16%));
    vertical-align: 0.2rem;
  }
}

* {
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

html { 
  @include colorize('../classy_fabric.png', $bgcolor, 0.2);
  color: $textcolor; 
  @extend .droid;
  @include textshadows(1, #000);
  
}

body { 
  margin: 0 auto; 
  min-width: 10em;
  max-width: 60em; 
  padding: 0 2em;
}

section { 
  margin: 2em 0 4em 0;
}

article {
  margin: 2em 0;
}

h1 {
  @extend .align-center;
  margin: 2em 0;
}

h2 {
  @extend .major-heading-font-size;
  @extend .fancy-heading-star;
  @include textshadows(1 1, #000 $minorfocuscolor );
  color: $textcolor;
  text-align: center;
  margin-bottom: 0;
}

h3 {
  @extend .minor-heading-font-size;
  margin: 0;
}

p { 
  line-height: 1.5; 
}

em { font-size: 75%; }

var { 
  background: $bgcolor; 
  border: 1px solid #000; 
  color: #fff;
  padding: 0.125em 0.25em;
 }

code { font-family: monospace, monospace; color: $minorfocuscolor; }

a { color: $linkcolor; text-decoration: none; }

#about { display: none; } 

.logo { 
  b {
    @extend .alfa;
    @extend .banner-font-size;
    letter-spacing: 4px;
    @include textshadows(1 1, #000 hsl(249, 64%, 80%));
    color: $mostfocuscolor; 

    &::before,
    &::after {
      content: "❧";
      text-shadow: 1px 1px 1px #000 ;
      padding-left: 0.15em;
    }

    &::before {
      content: "☙";
    }
  }

  i {
    @extend .droid;
    @extend .minor-heading-font-size;
    @include textshadows(1, $bgcolor);
    display: block;
    text-transform: lowercase;
    letter-spacing: 0;
    color: $textcolor;

  }
}

#get-api {
  @extend .droid;
}

#get-api h3 { 
  @extend .align-center;
  @extend .fancy-heading-star;
}


#features { 
  @extend .normal-font-size;
  display: block; 
  width: 100%;
  padding: 1rem;
}


label[for='features'] { 
  display: block;
}

.formats {
  @extend .align-center;
  margin: 2em 0 1em 0;
  border-top: 1px solid $bgcolorlesscontrast;
  padding-top: 4px;

  &::before{
    content: "";
    display: block;
    border-top: 1px dashed $bgcolorlesscontrast;
    margin-bottom: 1em;
  }

  &::after {
    margin: 1em 0 0 0;
  }

  h3 { 
    display: inline-block; 
    vertical-align: middle;
    margin: 0; 
  }

  p {
    display: inline-block;
    vertical-align: middle;
    position: relative;
    margin: 0 1em;
  }

  .help { display: block; }

  label {
    @extend .alfa;
    background: transparentize($bgcolor, 0.8);
    color: $bgcolorlesscontrast; 
    letter-spacing: 3px;
    padding: 0.1em 1em 0; 
    box-shadow: 2px 2px 0px 1px #000;
  }

  input[type="radio"] {
    position: absolute;
    opacity: 0;
    cursor: pointer;
    width: 100%; height: 100%;
  }

  input[type="radio"]:checked + label {
    background:  $mostfocuscolor;
    color: $textcolor;
  }


}

.help {
  font-size: small;
  text-align: center;
  display: block;
  color: lighten($bgcolorlesscontrast, 30%);
  margin-top: 0.5em;
}
input[type="radio"] { -webkit-appearance: radio; }
input[type="checkbox"] { -webkit-appearance: checkbox; } 
input[type="checkbox"] { margin-right: 0.25em; }
input[type="text"] { @extend .input-text; }

.options {
  text-align: center;
  border-bottom: 1px solid $bgcolorlesscontrast;
  padding-bottom: 4px;
  margin-bottom: 1.5em;


  &::after {
    border-top: 1px dashed $bgcolorlesscontrast;
    margin-top: 1em;
    display: block;
    content: "";
  }

  .options-content {
    display: inline-block; 
    text-align: left;
    color: $bgcolorlesscontrast;
  }

  p { 
    margin: 0; 
    position: relative;
  }

  p + p {
    margin: 0.5em 0 0 0;
  }

  input[type="checkbox"] {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0; left: 0;
    opacity: 0;
  }

  #callback {
    width: 1em;
  }

  label::before,
  .label::before {
      content: "+";
      text-shadow: none;
      display: inline-block;
      font-weight: bold;
      background: transparentize($bgcolor, 0.9);
      border-radius: 2px;
      line-height: 1em;
      text-align: center;
      color: #000;
      width: 1em; height: 1em;
      box-shadow: inset 0 0 5px #000;
      margin-right: 0.5em;
  }

  p:hover {
    color: $textcolor;
    label::before,
    .label::before {
      background: $textcolor;
    }
   }

  input[type="checkbox"]:checked + label,
  input[type="checkbox"]:checked + .label  {
    color: $mostfocuscolor;
    &::before { background: $mostfocuscolor; }
  }
}

.options-content p,
.options h3 { display: none; }
.options-content p.active,
.options h3.active{ display: block; }

.api-example {
  @extend .clearfix;
  margin: 0.5em 0 2em 0;
  h3 {
    @extend .fancy-heading-star;
    text-align: center;
    margin-bottom: 1rem;
  }

}

#url {
  display: block;
  width: 100%;
  background: desaturate($minorfocuscolor, 20%);
  outline: 1px dashed $minorfocuscolor;
  outline-offset: 4px;
  color: $bgcolor;
  text-shadow: none;
  font-style: normal;
  font-family: monospace;
  padding: 1em;
  word-wrap: break-word;

  &:hover {
    background: $mostfocuscolor;
    outline: 1px dashed $mostfocuscolor;

  }
}

footer {
  @include remfallback('font-size', 0.8);
  text-align: center;
  margin-bottom: 4rem;

  .builders {
    margin: 1em 0;
    @extend .clearfix;

    h3, & > a {
      display: inline-block;
      vertical-align: middle;
      text-align: left;
    }

    h3 {
      @extend .fancy-heading-star;
      @extend .normal-font-size;
    }
    > a {
      width: 9em;
      img {
        float: left;
        margin-right: 0.5em;
      }

      b {
        display: block;
        font-weight: normal;
      }
    
    }
  }  
}

@media (max-width: 480px) {

  html {
    font-size: 12px;
  }


}
